<!DOCTYPE html>
<html>
<head>
    <title>Interactive Vector Projection with p5.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
    </style>
</head>
<body>
    <script>
        let v;
        let dragging = false;
        const handleRadius = 10;

        function setup() {
            createCanvas(400, 400);
            angleMode(DEGREES);
            v = createVector(100, 50);
        }

        function draw() {
            background(255);
            translate(width / 2, height / 2);
            drawGrid();

            // Update vector if dragging
            if (dragging) {
                v.x = mouseX - width / 2;
                v.y = mouseY - height / 2;
            }

            // Draw vector and handle
            drawVector(v, 'blue', 'V (Standard Basis)');
            ellipse(v.x, v.y, handleRadius * 2);

            // Draw basis vectors and projections
            let basis1 = p5.Vector.fromAngle(radians(45)).mult(50);
            let basis2 = p5.Vector.fromAngle(radians(135)).mult(50);
            drawVector(basis1, 'red', 'Basis 1');
            drawVector(basis2, 'green', 'Basis 2');
            drawVector(project(v, basis1), 'orange', 'Projection on Basis 1');
            drawVector(project(v, basis2), 'purple', 'Projection on Basis 2');
        }

        function mousePressed() {
            let d = dist(mouseX, mouseY, v.x + width / 2, v.y + height / 2);
            if (d < handleRadius) {
                dragging = true;
            }
        }

        function mouseReleased() {
            dragging = false;
        }

        function drawVector(vec, color, label) {
            stroke(color);
            fill(color);
            line(0, 0, vec.x, vec.y);
            ellipse(vec.x, vec.y, 5, 5);
            text(label, vec.x + 5, vec.y + 5);
        }

        function project(vec, basis) {
            let scalar = vec.dot(basis) / basis.magSq();
            return p5.Vector.mult(basis, scalar);
        }

        function drawGrid() {
            stroke(200);
            for (let x = -width; x < width; x += 20) {
                line(x, -height, x, height);
            }
            for (let y = -height; y < height; y += 20) {
                line(-width, y, width, y);
            }
        }
    </script>
</body>
</html>
